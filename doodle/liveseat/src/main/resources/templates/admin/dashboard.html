<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>관리자 대시보드 - LiveSeat</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<nav class="navbar navbar-dark bg-warning">
    <div class="container">
        <span class="navbar-brand">관리자 대시보드</span>
        <a href="/concerts" class="btn btn-outline-dark btn-sm">사용자 페이지</a>
    </div>
</nav>

<div class="container mt-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1>공연 관리</h1>
        <a href="/admin/concerts/new" class="btn btn-success">새 공연 등록</a>
    </div>

    <div th:if="${param.registered}" class="alert alert-success" role="alert">
        공연이 성공적으로 등록되었습니다!
    </div>

    <table class="table table-hover">
        <thead class="table-dark">
        <tr>
            <th>ID</th>
            <th>공연 제목</th>
            <th>공연 기간</th>
            <th>잔여/총 좌석</th>
            <th>예매율</th>
            <th>액션</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="concert : ${concerts}">
            <td th:text="${concert.id}">1</td>
            <td th:text="${concert.title}">공연 제목</td>
            <td>
                <span th:text="${#temporals.format(concert.startDate, 'MM/dd')}"></span> ~
                <span th:text="${#temporals.format(concert.endDate, 'MM/dd')}"></span>
            </td>
            <td th:text="${concert.availableSeats} + ' / ' + ${concert.totalSeats}">50 / 100</td>
            <td>
                <div class="progress" style="height: 20px;">
                    <div class="progress-bar"
                         th:style="'width: ' + ${(concert.totalSeats - concert.availableSeats) * 100 / concert.totalSeats} + '%'"
                         th:text="${(concert.totalSeats - concert.availableSeats) * 100 / concert.totalSeats} + '%'">
                        50%
                    </div>
                </div>
            </td>
            <td>
                <a th:href="@{/admin/concerts/{id}/stats(id=${concert.id})}" class="btn btn-sm btn-primary">통계</a>
            </td>
        </tr>
        </tbody>
    </table>

    <div th:if="${concerts.isEmpty()}" class="alert alert-info" role="alert">
        등록된 공연이 없습니다. 새 공연을 등록해주세요.
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
